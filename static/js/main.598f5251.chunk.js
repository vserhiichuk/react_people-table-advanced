(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(26),c=n(8),a=(n(36),n(37),n(3)),s=n(5),l=n(0),i=n.n(l),o=n(9),j=n(10),u=n.n(j);function d(e,t){var n=new URLSearchParams(t.toString());return Object.entries(e).forEach((function(e){var t=Object(s.a)(e,2),r=t[0],c=t[1];null===c?n.delete(r):Array.isArray(c)?(n.delete(r),c.forEach((function(e){n.append(r,e)}))):n.set(r,c)})),n.toString()}var b=n(15),h=n(27),O=n(1),m=["children","params"],x=function(e){var t=e.children,n=e.params,r=Object(h.a)(e,m),a=Object(c.d)(),l=Object(s.a)(a,1)[0];return Object(O.jsx)(c.b,Object(b.a)(Object(b.a)({to:{search:d(n,l)}},r),{},{children:t}))},p=["16","17","18","19","20"],f=["Name","Sex","Born","Died"],v=[{label:"All",value:null},{label:"Male",value:"m"},{label:"Female",value:"f"}],g=function(){var e=Object(c.d)(),t=Object(s.a)(e,2),n=t[0],r=t[1],a=n.get("query")||"",l=n.get("sex")||null,j=n.getAll("centuries")||[];return Object(O.jsxs)("nav",{className:"panel",children:[Object(O.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(O.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:v.map((function(e){return Object(O.jsx)(i.a.Fragment,{children:Object(O.jsx)(x,{className:u()({"is-active":e.value===l}),params:{sex:e.value},children:e.label})},e.label)}))}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsxs)("p",{className:"control has-icons-left",children:[Object(O.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:a,onChange:function(e){!function(e){var t=d(e,n);r(t)}({query:e.target.value||null})}}),Object(O.jsx)("span",{className:"icon is-left",children:Object(O.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(O.jsx)("div",{className:"level-left",children:p.map((function(e){return Object(O.jsx)(i.a.Fragment,{children:Object(O.jsx)(x,{"data-cy":"century",className:u()("button mr-1",{"is-info":j.includes(e)}),params:{centuries:j.includes(e)?j.filter((function(t){return t!==e})):[].concat(Object(o.a)(j),[e])},children:e})},e)}))}),Object(O.jsx)("div",{className:"level-right ml-4",children:Object(O.jsx)(x,{"data-cy":"centuryALL",className:u()("button is-success",{"is-outlined":j.length}),params:{centuries:null},children:"All"})})]})}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsx)(x,{className:"button is-link is-outlined is-fullwidth",params:{centuries:null,sex:null,query:null},children:"Reset all filters"})})]})},N=(n(39),function(){return Object(O.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(O.jsx)("div",{className:"Loader__content"})})}),y=function(e){var t=e.errorMessage;return Object(O.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:t})},w=function(){return Object(O.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"})},k=function(e){var t=e.person,n=t.slug,r=t.sex,a=t.name;return Object(O.jsx)(c.b,{to:"../".concat(n),className:u()({"has-text-danger":"f"===r}),children:a})},S=function(e){var t=e.person,n=Object(a.q)().slug;return Object(O.jsxs)("tr",{"data-cy":"person",className:u()({"has-background-warning":t.slug===n}),children:[Object(O.jsx)("td",{children:Object(O.jsx)(k,{person:t})}),Object(O.jsx)("td",{children:t.sex}),Object(O.jsx)("td",{children:t.born}),Object(O.jsx)("td",{children:t.died}),Object(O.jsx)("td",{children:t.mother?Object(O.jsx)(k,{person:t.mother}):t.motherName||"-"}),Object(O.jsx)("td",{children:t.father?Object(O.jsx)(k,{person:t.father}):t.fatherName||"-"})]},t.slug)},L=function(){var e=Object(c.d)(),t=Object(s.a)(e,1)[0],n=t.get("sort")||null,r=t.get("order")||null,a=function(e){return n!==e?{sort:e,order:null}:n!==e||r?{sort:null,order:null}:{sort:e,order:"desc"}};return Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[f.map((function(e){var t=e.toLowerCase();return Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e,Object(O.jsx)(x,{params:a(t),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:u()("fas","fa-sort",{"fa-sort-up":n===t&&!r,"fa-sort-down":n===t&&r})})})})]})},e)})),Object(O.jsx)("th",{children:"Mother"}),Object(O.jsx)("th",{children:"Father"})]})})},C=function(e){var t=e.people;return Object(O.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(O.jsx)(L,{}),Object(O.jsx)("tbody",{children:t.map((function(e){return Object(O.jsx)(S,{person:e},e.slug)}))})]})},F=n(4),A=n(7),P="https://mate-academy.github.io/react_people-table/api/people.json";function M(e){return new Promise((function(t){return setTimeout(t,e)}))}function q(){return(q=Object(A.a)(Object(F.a)().mark((function e(){return Object(F.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(500).then((function(){return fetch(P)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){return Object(O.jsx)("p",{children:"There are no people matching the current search criteria"})},_=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({});var B=function(e,t,n,r,c,a){var s=Object(o.a)(e);t&&(s=s.filter((function(e){var n,r,c=t.toLowerCase(),a=e.name.toLowerCase().includes(t.toLowerCase()),s=null===(n=e.motherName)||void 0===n?void 0:n.toLowerCase().includes(c),l=null===(r=e.fatherName)||void 0===r?void 0:r.toLowerCase().includes(c);return a||s||l}))),n&&(s=s.filter((function(e){return e.sex===n}))),r.length&&(s=s.filter((function(e){var t=e.born,n=Math.floor(t/100+1);return r.includes(n.toString())})));var l=function(e,t,n){var r=Object(o.a)(e);switch(t){case _.Name:r=r.sort((function(e,t){return e.name.localeCompare(t.name)}));break;case _.Sex:r=r.sort((function(e,t){return e.sex.localeCompare(t.sex)}));break;case _.Born:r=r.sort((function(e,t){return e.born-t.born}));break;case _.Died:r=r.sort((function(e,t){return e.died-t.died}))}return n&&(r=r.reverse()),r}(s,c,a);return l},T=function(){var e=Object(l.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(l.useState)(!1),i=Object(s.a)(a,2),o=i[0],j=i[1],u=Object(l.useState)(""),d=Object(s.a)(u,2),h=d[0],m=d[1],x=Object(c.d)(),p=Object(s.a)(x,1)[0];Object(l.useEffect)((function(){j(!0),function(){return q.apply(this,arguments)}().then((function(e){r(function(e){return e.map((function(t){return Object(b.a)(Object(b.a)({},t),{},{mother:e.find((function(e){return e.name===t.motherName})),father:e.find((function(e){return e.name===t.fatherName}))})}))}(e))})).catch((function(){m("Something went wrong")})).finally((function(){j(!1)}))}),[]);var f=h&&!o,v=!n.length&&!o&&!h,k=!!n.length&&!h,S=p.get("query")||"",L=p.get("sex")||"",F=p.getAll("centuries")||[],A=p.get("sort")||"",P=p.get("order")||"",M=B(n,S,L,F,A,P);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"title",children:"People Page"}),Object(O.jsx)("div",{className:"block",children:Object(O.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(O.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(O.jsx)(g,{})}),Object(O.jsx)("div",{className:"column",children:Object(O.jsxs)("div",{className:"box table-container",children:[o&&Object(O.jsx)(N,{}),f&&Object(O.jsx)(y,{errorMessage:h}),v&&Object(O.jsx)(w,{}),!M.length&&!o&&Object(O.jsx)(E,{}),k&&!!M.length&&Object(O.jsx)(C,{people:M})]})})]})})]})},D=function(){return Object(O.jsx)("h1",{className:"title",children:"Home Page"})},R=function(){return Object(O.jsx)("h1",{className:"title",children:"Page not found"})},H=function(){var e=Object(c.d)(),t=Object(s.a)(e,1)[0],n=function(e){var t=e.isActive;return u()("navbar-item",{"has-background-grey-lighter":t})};return Object(O.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"navbar-brand",children:[Object(O.jsx)(c.c,{to:"/",className:n,children:"Home"}),Object(O.jsx)(c.c,{to:{pathname:"/people",search:"?".concat(t.toString())},className:n,children:"People"})]})})})},J=(n(40),function(){return Object(O.jsxs)("div",{"data-cy":"app",children:[Object(O.jsx)(H,{}),Object(O.jsx)("main",{className:"section",children:Object(O.jsxs)(a.d,{children:[Object(O.jsx)(a.b,{path:"/",element:Object(O.jsx)(D,{})}),Object(O.jsx)(a.b,{path:"people",children:Object(O.jsx)(a.b,{path:":slug?",element:Object(O.jsx)(T,{})})}),Object(O.jsx)(a.b,{path:"/home",element:Object(O.jsx)(a.a,{to:"/",replace:!0})}),Object(O.jsx)(a.b,{path:"*",element:Object(O.jsx)(R,{})})]})})]})});Object(r.createRoot)(document.getElementById("root")).render(Object(O.jsx)(c.a,{children:Object(O.jsx)(J,{})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.598f5251.chunk.js.map